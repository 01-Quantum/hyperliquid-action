import"./modulepreload-polyfill-B5Qt9EMX.js";import{ethers as a}from"https://cdnjs.cloudflare.com/ajax/libs/ethers/6.13.2/ethers.js";const i=await fetch("./QONE.json").then(e=>e.json()),l={chainId:"0x3e7",chainName:"Hyperliquid Mainnet",nativeCurrency:{name:"HYPE",symbol:"HYPE",decimals:18},rpcUrls:["https://rpc.hyperliquid.xyz/evm"],blockExplorerUrls:["https://purrsec.com"]};let o,r,s;async function u(){if(!window.ethereum)return alert("Please install MetaMask");try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[l]});const e=await window.ethereum.request({method:"eth_requestAccounts"});o=new a.BrowserProvider(window.ethereum),r=await o.getSigner(),document.getElementById("accountDisplay").textContent=`Connected: ${e[0]}`,document.getElementById("connectBtn").style.display="none",document.getElementById("probeAddr").value=e[0]}catch(e){alert("Failed to connect: "+e.message)}}async function c(){const e=document.getElementById("tokenAddress").value;if(!a.isAddress(e))return alert("Invalid token address");s=new a.Contract(e,i.abi,o);try{const[t,n,d]=await Promise.all([s.pqcAuthorizer(),s.pendingPQCAuthorizer(),s.upgradeTimelock()]);document.getElementById("currAuth").textContent=t,document.getElementById("pendAuth").textContent=n===a.ZeroAddress?"None":n,document.getElementById("timelock").textContent=d==0?"N/A":new Date(Number(d)*1e3).toLocaleString(),document.getElementById("contractInfo").style.display="block"}catch(t){alert("Error loading info: "+t.message)}}document.getElementById("connectBtn").onclick=u;document.getElementById("loadInfo").onclick=c;document.getElementById("proposeBtn").onclick=async()=>{const e=document.getElementById("newAuthAddr").value,t=document.getElementById("proposeStatus");if(!a.isAddress(e))return alert("Invalid address");t.className="status info",t.textContent="Sending proposal...";try{const n=await s.connect(r).proposePQCAuthorizer(e);t.textContent="Transaction sent: "+n.hash,await n.wait(),t.className="status success",t.textContent="Proposal successful!",c()}catch(n){t.className="status error",t.textContent=n.message}};document.getElementById("probeBtn").onclick=async()=>{const e=document.getElementById("probeAddr").value,t=document.getElementById("probeStatus");if(!a.isAddress(e))return alert("Invalid address");t.className="status info",t.textContent="Probing...";try{const n=await s.probePendingAuthorizer(e);t.className="status success",t.innerHTML=`Status: ${n.status}<br>Pending: ${n.pending}`}catch(n){t.className="status error",t.textContent=n.message}};document.getElementById("finalizeBtn").onclick=async()=>{const e=document.getElementById("proofHex").value,t=document.getElementById("finalizeStatus");t.className="status info",t.textContent="Finalizing upgrade...";try{const n=await s.connect(r).finalizePQCAuthorizer(e);t.textContent="Transaction sent: "+n.hash,await n.wait(),t.className="status success",t.textContent="Upgrade finalized!",c()}catch(n){t.className="status error",t.textContent=n.message}};
